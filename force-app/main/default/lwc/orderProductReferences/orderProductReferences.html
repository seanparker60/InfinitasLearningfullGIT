<template>
    <hr style="border-top: 3px solid #bbb;">
    <div>
        <h2 style="user-select: auto;
        display: block;
        font-size: 1.5em;
        margin-top: 0.83em;
        margin-bottom: 0.83em;
        margin-left: 0;
        margin-right: 0;
        font-weight: bold;">Order Products</h2>
    </div>
    <table class="slds-table slds-table_cell-buffer slds-table_bordered slds-table_col-bordered" aria-label="Example table of Opportunities with vertical borders">
        <thead>
          <tr class="slds-line-height_reset">
            <th aria-sort="none" class="slds-is-resizable slds-is-sortable slds-cell_action-mode" scope="col">
                <div class="slds-truncate" title="Row Count"></div>
            </th>
            <th aria-sort="none" class="slds-is-resizable slds-is-sortable slds-cell_action-mode" scope="col">
              <div class="slds-truncate" title="Product Name">Product Name</div>
            </th>
            <th aria-sort="none" class="slds-is-resizable slds-is-sortable slds-cell_action-mode" scope="col">
              <div class="slds-truncate" title="Product EAN">Product EAN</div>
            </th>
            <th aria-sort="none" class="slds-is-resizable slds-is-sortable slds-cell_action-mode" scope="col">
              <div class="slds-truncate" title="Producy Type">Product Type</div>
            </th>
            <th aria-sort="none" class="slds-is-resizable slds-is-sortable slds-cell_action-mode" scope="col">
              <div class="slds-truncate" title="Quantity">Quantity</div>
            </th>
            <th aria-sort="none" class="slds-is-resizable slds-is-sortable slds-cell_action-mode" scope="col">
              <div class="slds-truncate" title="Order Item Reference">Order Item Reference (Maximum of {referenceMax} characters)</div>
            </th>
          </tr>
        </thead>
        <tbody>
            <template for:each={trackedRecords} for:item="orderItem">
            <tr class="slds-hint-parent" key={orderItem.id}>
                <td data-label="Row Count" role="gridcell">
                    <div class="slds-truncate" title="Row Count">{orderItem.rowNumber}</div>
                </td>
                <td data-label="Product Name" class="slds-cell_action-mode" role="gridcell">
                    <div class="slds-truncate" title="Product Name">{orderItem.ProductName__c}</div>
                </td>
                <template if:true={isOrder}>
                  <td data-label="Product EAN" class="slds-cell_action-mode" role="gridcell">
                      <div class="slds-truncate" title="Product EAN">{orderItem.ProductEAN__c}</div>
                  </td>
                </template>
              <template if:false={isOrder}>
                <td data-label="EAN" class="slds-cell_action-mode" role="gridcell">
                    <div class="slds-truncate" title="EAN">{orderItem.EAN__c}</div>
                </td>
              </template>
                <td data-label="Product EAN" class="slds-cell_action-mode" role="gridcell">
                    <div class="slds-truncate" title="Product Type">{orderItem.ProductType__c}</div>
                </td>
                <td data-label="Quantity" class="slds-cell_action-mode" role="gridcell">
                    <div class="slds-truncate" title="Quantity">{orderItem.Quantity}</div>
                </td>
                <td data-label="Order Item Reference" class="slds-cell_action-mode" role="gridcell">
                    <lightning-input type="text" data-record-id={orderItem.Id} value={orderItem.CustomerReference__c} onchange={handleAttributeChange} max-length={referenceMax} message-when-too-long="Too many characters"></lightning-input>
                </td>
                </tr>
           </template>
        </tbody>
      </table>
      <!--<hr style="border-top: 3px solid #bbb;">-->
      <div style="text-align: right; margin-top: 2%;">
        <lightning-button-group>
            <lightning-button label="Close" onclick={handleClick}></lightning-button>
            <lightning-button variant="brand" label="Save" onclick={handleClick}></lightning-button>
        </lightning-button-group>
       </div>
    <hr style="border-top: 3px solid #bbb;">
</template>